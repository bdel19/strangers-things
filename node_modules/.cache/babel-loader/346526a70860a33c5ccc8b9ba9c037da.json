{"ast":null,"code":"import _regeneratorRuntime from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{registerUser}from\"../api/api\";import{useParams,useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Account=function Account(_ref){var setToken=_ref.setToken;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useParams=useParams(),action=_useParams.action;var history=useHistory();console.log(\"action\",action);var onSubmitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$registerUser,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return registerUser(username,password);case 4:_yield$registerUser=_context.sent;data=_yield$registerUser.data;setToken(data.token);history.push(\"/\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.error(\"An error has occured\",_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function onSubmitHandler(_x){return _ref2.apply(this,arguments);};}();var title=action===\"login\"?\"Log In\":\"Sign Up\";return/*#__PURE__*/_jsxs(\"form\",{className:\"ui form\",onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,placeholder:\"username\",required:true,onChange:function onChange(event){return setUsername(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,placeholder:\"password\",minLength:\"8\",required:true,onChange:function onChange(event){return setPassword(event.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"ui button\",type:\"submit\",children:title})]});};export default Account;","map":{"version":3,"names":["React","useState","registerUser","useParams","useHistory","Account","setToken","username","setUsername","password","setPassword","action","history","console","log","onSubmitHandler","event","preventDefault","data","token","push","error","title","target","value"],"sources":["/home/bdel19/course_work/strangers-things/src/components/Account.js"],"sourcesContent":["import React, {useState} from 'react'\nimport {registerUser} from \"../api/api\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nconst Account = ( {setToken} ) => {\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const {action} = useParams();\n    const history= useHistory()\n    console.log(\"action\", action);\n\n    const onSubmitHandler = async(event) => {\n        event.preventDefault();\n        try{\n            const {data} = await registerUser(username, password);\n            setToken(data.token);\n            history.push(\"/\");\n        } catch(error) {\n            console.error(\"An error has occured\", error);\n        }\n    };\n\n    const title = action === \"login\" ? \"Log In\" : \"Sign Up\"\n\n    return (\n        <form className  =\"ui form\" onSubmit={onSubmitHandler}>\n            <h1>{title}</h1>\n            <div className=\"field\">\n                <label>Username</label>\n                <input \n                type=\"text\" \n                value={username} \n                placeholder=\"username\" \n                required\n                onChange={(event) => setUsername(event.target.value)}\n                />\n            </div>\n            <div className=\"field\">\n                <label>Password</label>\n                <input \n                    type=\"password\" \n                    value={password} \n                    placeholder=\"password\" \n                    minLength=\"8\"\n                    required \n                    onChange={(event) => setPassword(event.target.value)}\n                />\n            </div>\n            <button className=\"ui button\" type=\"submit\">{title}</button>\n        </form>\n    )\n};\n\nexport default Account;"],"mappings":"6YAAA,MAAOA,MAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,OAAQC,YAAY,KAAO,YAAY,CACvC,OAASC,SAAS,CAAEC,UAAU,KAAQ,kBAAkB,CAAC,wFAEzD,GAAMC,QAAO,CAAG,QAAVA,QAAO,MAAqB,IAAfC,SAAQ,MAARA,QAAQ,CACvB,cAAgCL,QAAQ,CAAC,EAAE,CAAC,wCAArCM,QAAQ,eAAEC,WAAW,eAC5B,eAAgCP,QAAQ,CAAC,EAAE,CAAC,yCAArCQ,QAAQ,eAAEC,WAAW,eAC5B,eAAiBP,SAAS,EAAE,CAArBQ,MAAM,YAANA,MAAM,CACb,GAAMC,QAAO,CAAER,UAAU,EAAE,CAC3BS,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEH,MAAM,CAAC,CAE7B,GAAMI,gBAAe,6FAAG,iBAAMC,KAAK,iJAC/BA,KAAK,CAACC,cAAc,EAAE,CAAC,sCAEEf,aAAY,CAACK,QAAQ,CAAEE,QAAQ,CAAC,0CAA9CS,IAAI,qBAAJA,IAAI,CACXZ,QAAQ,CAACY,IAAI,CAACC,KAAK,CAAC,CACpBP,OAAO,CAACQ,IAAI,CAAC,GAAG,CAAC,CAAC,iFAElBP,OAAO,CAACQ,KAAK,CAAC,sBAAsB,aAAQ,CAAC,qEAEpD,kBATKN,gBAAe,6CASpB,CAED,GAAMO,MAAK,CAAGX,MAAM,GAAK,OAAO,CAAG,QAAQ,CAAG,SAAS,CAEvD,mBACI,cAAM,SAAS,CAAG,SAAS,CAAC,QAAQ,CAAEI,eAAgB,wBAClD,oBAAKO,KAAK,EAAM,cAChB,aAAK,SAAS,CAAC,OAAO,wBAClB,mCAAuB,cACvB,cACA,IAAI,CAAC,MAAM,CACX,KAAK,CAAEf,QAAS,CAChB,WAAW,CAAC,UAAU,CACtB,QAAQ,MACR,QAAQ,CAAE,kBAACS,KAAK,QAAKR,YAAW,CAACQ,KAAK,CAACO,MAAM,CAACC,KAAK,CAAC,EAAC,EACnD,GACA,cACN,aAAK,SAAS,CAAC,OAAO,wBAClB,mCAAuB,cACvB,cACI,IAAI,CAAC,UAAU,CACf,KAAK,CAAEf,QAAS,CAChB,WAAW,CAAC,UAAU,CACtB,SAAS,CAAC,GAAG,CACb,QAAQ,MACR,QAAQ,CAAE,kBAACO,KAAK,QAAKN,YAAW,CAACM,KAAK,CAACO,MAAM,CAACC,KAAK,CAAC,EAAC,EACvD,GACA,cACN,eAAQ,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,UAAEF,KAAK,EAAU,GACzD,CAEf,CAAC,CAED,cAAejB,QAAO"},"metadata":{},"sourceType":"module"}