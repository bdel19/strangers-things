{"ast":null,"code":"import _regeneratorRuntime from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{createPost}from\"../api/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostCreateForm=function PostCreateForm(_ref){var token=_ref.token,setPost=_ref.setPost;console.log(\"running PostCreateForm\");var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];return/*#__PURE__*/_jsxs(\"form\",{className:\"ui form\",onSubmit:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$createPost,error,post;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return createPost(token,title,description,price,location);case 3:_yield$createPost=_context.sent;error=_yield$createPost.error;post=_yield$createPost.post;console.log(\"post form onsubmit\",error,post);// ----------\"setPost is not a function at onSubmit\"?----------\nif(post){setPost(function(prevPosts){return[].concat(_toConsumableArray(prevPosts),[post]);});setTitle('');setDescription('');setPrice('');setLocation('');history.push('/posts');}else{console.log(\"Error in if(post)\");setErrorMessage(error);}case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{name:\"title\",type:\"text\",placeholder:\"Post Title\",required:true,autoComplete:\"off\",value:title,onChange:function onChange(event){return setTitle(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{name:\"description\",type:\"text\",placeholder:\"A description of Item\",required:true,autoComplete:\"off\",value:description,onChange:function onChange(event){return setDescription(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Item Price\"}),/*#__PURE__*/_jsx(\"input\",{name:\"price\",type:\"text\",placeholder:\"Item Price\",required:true,autoComplete:\"off\",value:price,onChange:function onChange(event){return setPrice(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"location\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{name:\"location\",type:\"text\",placeholder:\"Where item is located\",autoComplete:\"off\",value:location,onChange:function onChange(event){return setLocation(event.target.value);}})]}),errorMessage?/*#__PURE__*/_jsx(\"p\",{className:\"ui negative message\",children:errorMessage}):null,/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"ui button\",children:\"Create\"})]});};export default PostCreateForm;","map":{"version":3,"names":["React","useState","useHistory","createPost","PostCreateForm","token","setPost","console","log","history","title","setTitle","description","setDescription","price","setPrice","location","setLocation","errorMessage","setErrorMessage","event","preventDefault","error","post","prevPosts","push","target","value"],"sources":["/home/bdel19/course_work/strangers-things/src/components/PostCreateForm.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { createPost } from \"../api/api\";\n\nconst PostCreateForm = ({token, setPost}) => {\n    console.log(\"running PostCreateForm\")\n    const history = useHistory();\n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [price, setPrice] = useState('');\n    const [location, setLocation] = useState('');\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    return (<form className=\"ui form\" onSubmit={async (event) => {\n        event.preventDefault();\n\n        const {error, post} = await createPost(\n            token, \n            title,\n            description, \n            price,\n            location,\n        );\n        console.log(\"post form onsubmit\", error, post);\n\n// ----------\"setPost is not a function at onSubmit\"?----------\n        if (post) {\n            setPost((prevPosts) => [...prevPosts, post]);\n            setTitle('');\n            setDescription('');\n            setPrice('');\n            setLocation('');\n            history.push('/posts');\n        } else {\n            console.log(\"Error in if(post)\")\n            setErrorMessage(error);\n        }\n\n\n    }}>\n        <h2>Create Post</h2>\n        <div className=\"field\">\n            <label htmlFor=\"title\">Title</label>\n            <input \n                name=\"title\" \n                type=\"text\" \n                placeholder=\"Post Title\" \n                required autoComplete=\"off\"\n                value={title}\n                onChange={(event) => setTitle(event.target.value)}></input>\n        </div>\n        \n        <div className=\"field\">\n            <label htmlFor=\"description\">Description</label>\n            <input \n                name=\"description\" \n                type=\"text\" \n                placeholder=\"A description of Item\" \n                required autoComplete=\"off\"\n                value={description}\n                onChange={(event) => setDescription(event.target.value)}></input>\n        </div>\n\n        <div className=\"field\">\n            <label htmlFor=\"price\">Item Price</label>\n            <input \n                name=\"price\" \n                type=\"text\" \n                placeholder=\"Item Price\" \n                required autoComplete=\"off\"\n                value={price}\n                onChange={(event) => setPrice(event.target.value)}></input>\n        </div>\n\n        <div className=\"field\">\n            <label htmlFor=\"location\">Location</label>\n            <input \n                name=\"location\"\n                type=\"text\" \n                placeholder=\"Where item is located\" \n                autoComplete=\"off\"\n                value={location}\n                onChange={(event) => setLocation(event.target.value)}\n            ></input>\n        </div>\n\n        {errorMessage ? \n            <p className=\"ui negative message\">{errorMessage}</p> : null}\n\n        <button type=\"submit\" className=\"ui button\">\n            Create\n        </button>\n    </form>\n    );\n};\n\nexport default PostCreateForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}