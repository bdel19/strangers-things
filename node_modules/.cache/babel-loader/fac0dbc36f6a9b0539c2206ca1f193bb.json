{"ast":null,"code":"import _regeneratorRuntime from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var baseURL='https://strangers-things.herokuapp.com/api/2207-FTB-ET-WEB-PT/';export var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,_yield$response$json,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(baseURL,\"posts\"));case 3:response=_context.sent;console.log(\"response\",response);_context.next=7;return response.json();case 7:_yield$response$json=_context.sent;data=_yield$response$json.data;console.log(\"This is data\",data.posts);return _context.abrupt(\"return\",data.posts);case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error(\"fetchPostsError\",_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();export var registerUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(username,password){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(baseURL,\"users/register\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:username,password:password}})});case 3:response=_context2.sent;console.log(\"response\",response);_context2.next=7;return response.json();case 7:data=_context2.sent;console.log(\"data\",data);return _context2.abrupt(\"return\",data);case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.error(\"There was an error registering the user\",_context2.t0);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,12]]);}));return function registerUser(_x,_x2){return _ref2.apply(this,arguments);};}();export var fetchUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(token){var response,_yield$response$json2,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"\".concat(baseURL,\"users/me\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context3.sent;console.log(\"USER RESPONSE\",response);_context3.next=7;return response.json();case 7:_yield$response$json2=_context3.sent;data=_yield$response$json2.data;console.log(\"USER DATA\",data);return _context3.abrupt(\"return\",data);case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);console.log('fetchUserError');case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[0,13]]);}));return function fetchUser(_x3){return _ref3.apply(this,arguments);};}();","map":{"version":3,"names":["baseURL","fetchPosts","fetch","response","console","log","json","data","posts","error","registerUser","username","password","method","headers","body","JSON","stringify","user","fetchUser","token"],"sources":["/home/bdel19/course_work/strangers-things/src/api/api.js"],"sourcesContent":["\n\n\n\nconst baseURL ='https://strangers-things.herokuapp.com/api/2207-FTB-ET-WEB-PT/';\n\n\n\nexport const fetchPosts = async () => {\n    try{\n        const response = await fetch(`${baseURL}posts`)\n        console.log(\"response\", response);\n        const {data} = await response.json();\n        console.log(\"This is data\", data.posts);\n        return data.posts;\n    } catch(error) {\n        console.error(\"fetchPostsError\", error);\n    }\n};\n\nexport const registerUser = async (username, password) => {\n    try{\n    const response =await fetch(`${baseURL}users/register`,{\n        method: \"POST\", \n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            user: {\n                username,\n                password,\n            },\n        }),\n    });\n    console.log(\"response\", response);\n    const data = await response.json();\n    console.log(\"data\", data);\n    return data;\n    } catch(error) {\n        console.error(\"There was an error registering the user\", error);\n    }\n};\n        \nexport const fetchUser = async(token) => {\n    try{\n        const response = await fetch(`${baseURL}users/me`, {  \n            headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`,\n          }})\n          console.log(\"USER RESPONSE\", response);\n          const {data} = await response.json();\n          console.log(\"USER DATA\", data );\n          return data;\n    }catch{\n        console.log('fetchUserError');\n    }\n};"],"mappings":"8QAIA,GAAMA,QAAO,CAAE,gEAAgE,CAI/E,MAAO,IAAMC,WAAU,4FAAG,kNAEKC,MAAK,WAAIF,OAAO,UAAQ,QAAzCG,QAAQ,eACdC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEF,QAAQ,CAAC,CAAC,sBACbA,SAAQ,CAACG,IAAI,EAAE,2CAA7BC,IAAI,sBAAJA,IAAI,CACXH,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEE,IAAI,CAACC,KAAK,CAAC,CAAC,gCACjCD,IAAI,CAACC,KAAK,4DAEjBJ,OAAO,CAACK,KAAK,CAAC,iBAAiB,aAAQ,CAAC,qEAE/C,kBAVYR,WAAU,0CAUtB,CAED,MAAO,IAAMS,aAAY,6FAAG,kBAAOC,QAAQ,CAAEC,QAAQ,kLAE3BV,MAAK,WAAIF,OAAO,mBAAiB,CACnDa,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,IAAI,CAAE,CACFP,QAAQ,CAARA,QAAQ,CACRC,QAAQ,CAARA,QACJ,CACJ,CAAC,CACL,CAAC,CAAC,QAXIT,QAAQ,gBAYdC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEF,QAAQ,CAAC,CAAC,uBACfA,SAAQ,CAACG,IAAI,EAAE,QAA5BC,IAAI,gBACVH,OAAO,CAACC,GAAG,CAAC,MAAM,CAAEE,IAAI,CAAC,CAAC,iCACnBA,IAAI,+DAEPH,OAAO,CAACK,KAAK,CAAC,yCAAyC,cAAQ,CAAC,uEAEvE,kBArBYC,aAAY,iDAqBxB,CAED,MAAO,IAAMS,UAAS,6FAAG,kBAAMC,KAAK,wMAELlB,MAAK,WAAIF,OAAO,aAAY,CAC/Cc,OAAO,CAAE,CACT,cAAc,CAAE,kBAAkB,CAClC,eAAe,kBAAYM,KAAK,CAClC,CAAC,CAAC,CAAC,QAJCjB,QAAQ,gBAKZC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEF,QAAQ,CAAC,CAAC,uBAClBA,SAAQ,CAACG,IAAI,EAAE,6CAA7BC,IAAI,uBAAJA,IAAI,CACXH,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEE,IAAI,CAAE,CAAC,iCACzBA,IAAI,+DAEbH,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAAC,uEAErC,kBAdYc,UAAS,8CAcrB"},"metadata":{},"sourceType":"module"}