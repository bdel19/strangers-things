{"ast":null,"code":"import _regeneratorRuntime from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/bdel19/course_work/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{registerUser,loginUser}from\"../api/api\";import{useParams,useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Account=function Account(_ref){var setToken=_ref.setToken;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useParams=useParams(),action=_useParams.action;var history=useHistory();console.log(\"running Accout\",action);var onSubmitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var authFn,_yield$authFn,error,token,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();authFn=action===\"register\"?registerUser:loginUser;_context.next=4;return authFn(username,password);case 4:_yield$authFn=_context.sent;error=_yield$authFn.error;token=_yield$authFn.token;message=_yield$authFn.message;console.error(error);setToken(token);if(token){history.push(\"/\");};case 12:case\"end\":return _context.stop();}}},_callee);}));return function onSubmitHandler(_x){return _ref2.apply(this,arguments);};}();var title=action===\"login\"?\"Log In\":\"Sign Up\";return/*#__PURE__*/_jsxs(\"form\",{className:\"ui form\",onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,placeholder:\"username\",required:true,onChange:function onChange(event){return setUsername(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,placeholder:\"password\",minLength:\"8\",required:true,onChange:function onChange(event){return setPassword(event.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"ui button\",type:\"submit\",children:title})]});};export default Account;","map":{"version":3,"names":["React","useState","registerUser","loginUser","useParams","useHistory","Account","setToken","username","setUsername","password","setPassword","action","history","console","log","onSubmitHandler","event","preventDefault","authFn","error","token","message","push","title","target","value"],"sources":["/home/bdel19/course_work/strangers-things/src/components/Account.js"],"sourcesContent":["import React, {useState} from 'react'\nimport {registerUser, loginUser} from \"../api/api\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nconst Account = ( {setToken} ) => {\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const {action} = useParams();\n    const history = useHistory();\n    console.log(\"running Accout\", action)\n\n    const onSubmitHandler = async(event) => {\n        event.preventDefault();\n        const authFn = action === \"register\" ? registerUser : loginUser\n        const {error, token, message} = await authFn(username, password);\n\n        console.error(error);\n\n        setToken(token);\n        \n        if (token) {\n        history.push(\"/\");\n        };\n    };\n\n    const title = action === \"login\" ? \"Log In\" : \"Sign Up\"\n\n    return (\n        <form className  =\"ui form\" onSubmit={onSubmitHandler}>\n            <h1>{title}</h1>\n            <div className=\"field\">\n                <label>Username</label>\n                <input \n                type=\"text\" \n                value={username} \n                placeholder=\"username\" \n                required\n                onChange={(event) => setUsername(event.target.value)}\n                />\n            </div>\n            <div className=\"field\">\n                <label>Password</label>\n                <input \n                    type=\"password\" \n                    value={password} \n                    placeholder=\"password\" \n                    minLength=\"8\"\n                    required \n                    onChange={(event) => setPassword(event.target.value)}\n                />\n            </div>\n            <button className=\"ui button\" type=\"submit\">{title}</button>\n        </form>\n    );\n};\n\nexport default Account;"],"mappings":"6YAAA,MAAOA,MAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,OAAQC,YAAY,CAAEC,SAAS,KAAO,YAAY,CAClD,OAASC,SAAS,CAAEC,UAAU,KAAQ,kBAAkB,CAAC,wFAEzD,GAAMC,QAAO,CAAG,QAAVA,QAAO,MAAqB,IAAfC,SAAQ,MAARA,QAAQ,CACvB,cAAgCN,QAAQ,CAAC,EAAE,CAAC,wCAArCO,QAAQ,eAAEC,WAAW,eAC5B,eAAgCR,QAAQ,CAAC,EAAE,CAAC,yCAArCS,QAAQ,eAAEC,WAAW,eAC5B,eAAiBP,SAAS,EAAE,CAArBQ,MAAM,YAANA,MAAM,CACb,GAAMC,QAAO,CAAGR,UAAU,EAAE,CAC5BS,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEH,MAAM,CAAC,CAErC,GAAMI,gBAAe,6FAAG,iBAAMC,KAAK,iKAC/BA,KAAK,CAACC,cAAc,EAAE,CAChBC,MAAM,CAAGP,MAAM,GAAK,UAAU,CAAGV,YAAY,CAAGC,SAAS,uBACzBgB,OAAM,CAACX,QAAQ,CAAEE,QAAQ,CAAC,oCAAzDU,KAAK,eAALA,KAAK,CAAEC,KAAK,eAALA,KAAK,CAAEC,OAAO,eAAPA,OAAO,CAE5BR,OAAO,CAACM,KAAK,CAACA,KAAK,CAAC,CAEpBb,QAAQ,CAACc,KAAK,CAAC,CAEf,GAAIA,KAAK,CAAE,CACXR,OAAO,CAACU,IAAI,CAAC,GAAG,CAAC,CACjB,CAAC,CAAC,uDACL,kBAZKP,gBAAe,6CAYpB,CAED,GAAMQ,MAAK,CAAGZ,MAAM,GAAK,OAAO,CAAG,QAAQ,CAAG,SAAS,CAEvD,mBACI,cAAM,SAAS,CAAG,SAAS,CAAC,QAAQ,CAAEI,eAAgB,wBAClD,oBAAKQ,KAAK,EAAM,cAChB,aAAK,SAAS,CAAC,OAAO,wBAClB,mCAAuB,cACvB,cACA,IAAI,CAAC,MAAM,CACX,KAAK,CAAEhB,QAAS,CAChB,WAAW,CAAC,UAAU,CACtB,QAAQ,MACR,QAAQ,CAAE,kBAACS,KAAK,QAAKR,YAAW,CAACQ,KAAK,CAACQ,MAAM,CAACC,KAAK,CAAC,EAAC,EACnD,GACA,cACN,aAAK,SAAS,CAAC,OAAO,wBAClB,mCAAuB,cACvB,cACI,IAAI,CAAC,UAAU,CACf,KAAK,CAAEhB,QAAS,CAChB,WAAW,CAAC,UAAU,CACtB,SAAS,CAAC,GAAG,CACb,QAAQ,MACR,QAAQ,CAAE,kBAACO,KAAK,QAAKN,YAAW,CAACM,KAAK,CAACQ,MAAM,CAACC,KAAK,CAAC,EAAC,EACvD,GACA,cACN,eAAQ,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,UAAEF,KAAK,EAAU,GACzD,CAEf,CAAC,CAED,cAAelB,QAAO"},"metadata":{},"sourceType":"module"}